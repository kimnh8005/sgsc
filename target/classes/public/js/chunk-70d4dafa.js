(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70d4dafa"],{"4c6c":function(t,e,a){},7417:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PageTitle",{attrs:{title:"사고 대응 매뉴얼"}}),a("div",{staticClass:"page-box"},[a("PanelTitle",{attrs:{title:"대응 매뉴얼 등록/수정"}}),a("div",{staticClass:"article-view"},[a("div",{staticClass:"article-header edit-mode"},[a("div",{staticClass:"item-box"},[t._m(0),a("select",{directives:[{name:"model",rawName:"v-model",value:t.article.category,expression:"article.category"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.article,"category",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"all"}},[t._v("전체 설비")]),t._l(t.MUAL_TYPE_CD,(function(e){return a("option",{key:e.cd_id,domProps:{value:e.cd_id}},[t._v(" "+t._s(e.cd_nm)+" ")])}))],2)]),a("div",{staticClass:"item-box"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.article.title,expression:"article.title"}],attrs:{type:"text"},domProps:{value:t.article.title},on:{input:function(e){e.target.composing||t.$set(t.article,"title",e.target.value)}}})])]),a("div",{staticClass:"article-body edit-mode"},[a("vue-editor",{attrs:{"editor-toolbar":t.customToolbar},model:{value:t.article.bodyText,callback:function(e){t.$set(t.article,"bodyText",e)},expression:"article.bodyText"}})],1),a("div",{staticClass:"attach-file"},[a("div",{staticClass:"attach-inner"},[t._v(" 첨부파일 : "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.article.attach.fileName,expression:"article.attach.fileName"}],attrs:{type:"text",readonly:""},domProps:{value:t.article.attach.fileName},on:{input:function(e){e.target.composing||t.$set(t.article.attach,"fileName",e.target.value)}}}),a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"attach"}}),a("button",{staticClass:"btn-dark",on:{click:t.onClickSearchAttach}},[t._v(" 파일 선택 ")])])])]),a("div",{staticClass:"button-group center-type article-buttons"},[a("button",{on:{click:t.goView}},[t._v("취 소")]),a("button",{attrs:{disabled:t.disableSave},on:{click:t.doSave}},[t._v("저 장")])])],1),t.isShowSpinner?a("LoadingSpinner"):t._e()],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v(" 분류 "),a("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v(" 제목 "),a("span",{staticClass:"required"},[t._v("*")])])}],l=(a("b0c0"),a("498a"),a("5530")),c=a("c6f9"),r=a("25b9"),o=a("2f62"),s=a("5a0c"),d=a.n(s),u=a("c684"),m=a("5ac6"),p={name:"IncidentResponseManualEdit",components:{LoadingSpinner:m["a"],VueEditor:u["VueEditor"],PageTitle:r["a"],PanelTitle:c["a"]},props:{mode:{type:String,required:!0},mual_sid:{type:String}},computed:Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])({},Object(o["c"])("common/manual",["incidentManual"])),Object(o["c"])("common/code",["MUAL_TYPE_CD"])),Object(o["b"])(["userData"])),{},{disableSave:function(){return"all"===this.article.category||""===this.article.title.trim()||""===this.article.bodyText.trim()}}),created:function(){this.queryList(),this.$store.dispatch("common/code/query",{code:"MUAL_TYPE_CD"})},data:function(){return{dayjs:d.a,article:{category:"all",title:"",bodyText:"",attach:{fileName:null,file:null}},isShowSpinner:!1,customToolbar:[[{header:[!1,1,2,3,4,5,6]}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","video"],["clean"]]}},methods:{queryList:function(){var t=this;"edit"===this.mode&&this.$store.dispatch("common/manual/incidentManual",{mual_sid:this.mual_sid}).then((function(){t.article.title=t.incidentManual.current.mual_title,t.article.bodyText=t.incidentManual.current.mual_cnt,t.article.category=t.incidentManual.current.mual_type_cd,t.article.attach.fileName=t.incidentManual.current.file_nm}))},goView:function(){var t=this.mual_sid?"/support/manual/view/"+this.mual_sid:"/support/manual";this.$router.push(t)},onClickSearchAttach:function(){var t=this,e=document.getElementById("attach");e.onchange=function(e){t.article.attach.file=e.target.files[0],t.article.attach.fileName=t.article.attach.file.name},e.click()},doSave:function(){var t=this;this.isShowSpinner=!0;var e,a=new FormData;a.append("Content-Type","multipart/form-data"),a.append("mual_type_cd",this.article.category),a.append("mual_title",this.article.title),a.append("mual_cnt",this.article.bodyText),this.article.attach.file&&a.append("file",this.article.attach.file),"edit"===this.mode?(e="common/manual/putIncidentManual",a.append("mual_sid",this.mual_sid)):"write"===this.mode?e="common/manual/postIncidentManual":"delete"===this.mode&&(e="common/manual/deleteIncidentManual",a={mual_sid:this.mual_sid}),this.$store.dispatch(e,a).then((function(e){"NRL001"===e.data.resultCode&&t.goView(),t.isShowSpinner=!1})).catch((function(){t.isShowSpinner=!1}))}}},h=p,v=(a("8c96"),a("2877")),f=Object(v["a"])(h,i,n,!1,null,"3f3a4bbb",null);e["default"]=f.exports},"8c96":function(t,e,a){"use strict";var i=a("4c6c"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-70d4dafa.js.map