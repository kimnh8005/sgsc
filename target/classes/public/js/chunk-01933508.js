(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01933508"],{"07d9":function(t,e,a){"use strict";var i=a("f217"),r=a.n(i);r.a},"324a":function(t,e,a){"use strict";var i=a("80da"),r=a.n(i);r.a},"3b51":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel-title"},[a("h5",[t._v(t._s(t.title))]),t.desc?a("div",{staticClass:"title-desc"},[t._v(t._s(t.desc))]):t._e(),a("div",{staticClass:"filler"}),t._t("button")],2)},r=[],s={name:"PanelSubTitle",props:{title:String,desc:String}},n=s,c=(a("07d9"),a("2877")),o=Object(c["a"])(n,i,r,!1,null,"e6519142",null);e["a"]=o.exports},"4ba1":function(t,e,a){"use strict";a("ac1f"),a("1276");var i={date:function(t,e){if(!t)return"";var a=t.substr(0,4),r=t.substr(4,2),s=t.substr(6,2),n=t.substr(8,2),c=t.substr(10,2),o=t.substr(12,2),u=""===n||""===c?"":" "+n+":"+c;if(u=""===o?u:" "+u+":"+o,"MM/dd~MM/dd"===e){var l=t.split("~");return i.date(l[0],"MM/dd")+"~"+i.date(l[1],"MM/dd")}return"MM/dd"===e?r+"/"+s:"MM/dd hh:mm"===e?r+"/"+s+" "+n+":"+c:a+"-"+r+"-"+s+u}};e["a"]=i},"5b5c":function(t,e,a){"use strict";var i=a("73bb"),r=a.n(i);r.a},"73bb":function(t,e,a){},"7ec5":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.validated?a("div",{class:{"double-row":!t.isDoubleRow}},[t.showRiskStep?a("RiskStepLabel",{class:{"full-size":t.isDoubleRow},attrs:{"delete-step-suffix":t.isDeleteStepSuffix,name:t.riskName,code:t.riskCode}}):t._e(),t.showRiskLabel?a("div",{staticClass:"risk-label"},[t._v(t._s(t.riskNum+t.riskUnit))]):t._e()],1):a("div",[t._v("-")])},r=[],s=(a("c975"),a("b0c0"),a("a9e3"),a("ac1f"),a("1276"),a("6e4b")),n={name:"RiskLabel",components:{RiskStepLabel:s["a"]},props:{isDoubleRow:Boolean,isDeleteStepSuffix:Boolean,showRiskStep:{type:Boolean,default:!0},showRiskLabel:{type:Boolean,default:!0},name:String,code:String,num:Number,unit:String,textData:String},computed:{validated:function(){return this.textData||this.code},isTextData:function(){return this.textData&&this.textData.indexOf(":")>-1},riskName:function(){var t="";if(this.isTextData)t=this.textData.indexOf(":")>-1?this.textData.split(":")[1]:this.textData;else if(this.name)t=this.name;else if(this.code){var e=this.code.substr(0,2),a=this.code.substr(-1,1);switch(e){case"NR":t="정상";break;case"CR":t="주의";break;case"WR":t="경고";break;case"DG":t="위험";break;default:t="-"}t=t+" "+a+" 단계"}return this.isDeleteStepSuffix&&(t=t.substr(0,2)),t},riskCode:function(){var t;if(this.isTextData){var e=this.textData.split(":")[1].substr(0,2);switch(e){case"정상":t="NR";break;case"주의":t="CR";break;case"경고":t="WR";break;case"위험":t="DG";break;default:t=""}}else t=this.code;return t},riskNum:function(){var t=0;if(this.isTextData){var e=this.textData.split(":");t=Number(e[0])}else t=this.num;return t},riskUnit:function(){return this.unit?this.unit:"%"}},methods:{}},c=n,o=(a("324a"),a("2877")),u=Object(o["a"])(c,i,r,!1,null,"6212cb5a",null);e["a"]=u.exports},"80da":function(t,e,a){},"99af":function(t,e,a){"use strict";var i=a("23e7"),r=a("d039"),s=a("e8b5"),n=a("861d"),c=a("7b0b"),o=a("50c4"),u=a("8418"),l=a("65f0"),h=a("1dde"),d=a("b622"),f=a("2d00"),p=d("isConcatSpreadable"),m=9007199254740991,v="Maximum allowed index exceeded",b=f>=51||!r((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),_=h("concat"),g=function(t){if(!n(t))return!1;var e=t[p];return void 0!==e?!!e:s(t)},k=!b||!_;i({target:"Array",proto:!0,forced:k},{concat:function(t){var e,a,i,r,s,n=c(this),h=l(n,0),d=0;for(e=-1,i=arguments.length;e<i;e++)if(s=-1===e?n:arguments[e],g(s)){if(r=o(s.length),d+r>m)throw TypeError(v);for(a=0;a<r;a++,d++)a in s&&u(h,d,s[a])}else{if(d>=m)throw TypeError(v);u(h,d++,s)}return h.length=d,h}})},a11a:function(t,e,a){"use strict";var i=a("a8fd"),r=a.n(i);r.a},a321:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chart-container",class:{"main-type":"MAIN"===t.chartType}},[a("highcharts",{ref:"highcharts",attrs:{options:t.chartOptions}})],1)},r=[],s=(a("99af"),a("4160"),a("a9e3"),a("ac1f"),a("1276"),a("159b"),a("4452")),n=a("4ba1"),c={name:"ChartBox",components:{highcharts:s["Chart"]},props:{chartType:String,rawData:null},watch:{seriesData:{handler:function(){var t=this;while(this.chart.series.length>0)this.chart.series[0].remove(!0);this.seriesData.forEach((function(e){t.chart.addSeries(e)})),this.chart.xAxis[0].setCategories(this.categoryData)},deep:!0}},computed:{seriesData:function(){var t=null;switch(this.chartType){case"MAIN":t=this.getMainList();break;case"PREDICTION24HOUR":t=this.getPrediction24HourList();break;case"PREDICTION7DAY":t=this.getPrediction7DayList();break;case"PREDICTION4WEEK":t=this.getPrediction4WeekList();break;case"PROCESS":t=this.getProcessList();break;case"EQUIPMENT":t=this.getProcessList();break;default:return[]}return t},categoryData:function(){var t=null;switch(this.chartType){case"MAIN":t=this.getHourCategories();break;case"PREDICTION24HOUR":t=this.getHourCategories();break;case"PREDICTION7DAY":t=this.getDayCategories();break;case"PREDICTION4WEEK":t=this.getWeekCategories();break;case"PROCESS":t=this.getProcessCategories();break;case"EQUIPMENT":t=this.getProcessCategories();break;default:return[]}return t}},mounted:function(){this.chart=this.$refs.highcharts.chart},data:function(){return{chart:null,chartOptions:{chart:{type:"area",height:this.getChartHeight(),animation:{duration:1e3}},title:!1,legend:this.getLegendConfig(),xAxis:{categories:[]},yAxis:{title:!1,labels:{formatter:function(){var t={0:"",25:"정상",50:"주의",75:"경고",100:"위험"},e={0:"transparent",25:"#2d969b",50:"#f06c00",75:"#ff0000",100:"#a40000"};return'<span style="color: '.concat(e[this.value],'">').concat(t[this.value],"</span>")},y:28,x:-40,style:{color:"#666666",fontSize:15,fontWeight:"bold"}},max:100,tickAmount:5,tickWidth:1,tickLength:100},plotOptions:{series:{marker:{fillColor:"#FFFFFF",lineWidth:2,lineColor:null}},area:{pointPlacement:"on"}},credits:{enabled:!1}}}},methods:{getProcessCategories:function(){var t=this,e=[];return this.rawData.data.forEach((function(a){t.rawData.cols.forEach((function(t){if("date"!==t){var i=a[t];i?e.push(t+"시"):e.push("")}}))})),e},getWeekCategories:function(){var t=[];return this.rawData.forEach((function(e){t.push(n["a"].date(e.risk_dt,"MM/dd~MM/dd"))})),t},getDayCategories:function(){var t=[];return this.rawData.forEach((function(e){t.push(n["a"].date(e.ymd,"MM/dd"))})),t},getHourCategories:function(){var t=[];return this.rawData.forEach((function(e){t.push(e.qtime+"시")})),t},getChartHeight:function(){return"MAIN"===this.chartType?250:230},getLegendConfig:function(){return"MAIN"===this.chartType&&{layout:"horizontal",align:"left",verticalAlign:"top",x:50}},getProcessList:function(){var t=[{name:"통합 위험률(%)",data:[],color:"#f58fae"}],e=this.rawData.cols;return this.rawData.data.forEach((function(a){e.forEach((function(e){if("date"!==e){var i=a[e];i=i?Number(i.split(":")[0]):null,t[0].data.push(i)}}))})),t},getPrediction4WeekList:function(){var t=[{name:"4주 예측",data:[],color:"#f58fae"}];return this.rawData.forEach((function(e){t[0].data.push(Number(e.risk_rate.split(":")[0]))})),t},getPrediction7DayList:function(){var t=[{name:"7일 예측",data:[],color:"#f58fae"}];return this.rawData.forEach((function(e){t[0].data.push(Number(e.risk_rate.split(":")[0]))})),t},getPrediction24HourList:function(){var t=[{name:"통합 위험률(%)",data:[],color:"#f58fae"}];return this.rawData.forEach((function(e){t[0].data.push(Number(e.risk_rate.split(":")[0]))})),t},getMainList:function(){var t=[{name:"발생확률(%)",data:[],color:"#f58fae"}];return this.rawData.forEach((function(e){t[0].data.push(Number(e.CRIG101.split(":")[0]))})),t}}},o=c,u=(a("a11a"),a("2877")),l=Object(u["a"])(o,i,r,!1,null,"818736b2",null);e["a"]=l.exports},a8fd:function(t,e,a){},ab95:function(t,e,a){"use strict";var i=a("bd96"),r=a.n(i);r.a},bd96:function(t,e,a){},e609:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PageTitle"),a("div",{staticClass:"page-box"},[a("PanelTitle",{attrs:{title:"24시간 예측 위험도 높은 설비"}}),a("div",{staticClass:"container"},[a("div",{staticClass:"table-container"},[a("table",{staticClass:"default-table"},[t._m(0),a("tbody",t._l(t.predictEquipmentRiskTop10.hour24.slice(0,5),(function(e,i){return a("tr",{key:i},[a("th",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.procs_nm)),a("span",{staticClass:"arrow"},[t._v(">")]),t._v(t._s(e.eqmt_nm))]),a("td",[a("RiskStepLabel",{attrs:{useStepByName:!0,name:e.risk_step_nm}})],1),a("th",[t._v(t._s(e.risk_num+e.risk_unit))])])})),0)])]),a("div",{staticClass:"table-container"},[a("table",{staticClass:"default-table"},[t._m(1),a("tbody",t._l(t.predictEquipmentRiskTop10.hour24.slice(5,10),(function(e,i){return a("tr",{key:i},[a("th",[t._v(t._s(i+6))]),a("td",[t._v(t._s(e.procs_nm)),a("span",{staticClass:"arrow"},[t._v(">")]),t._v(t._s(e.eqmt_nm))]),a("td",[a("RiskStepLabel",{attrs:{useStepByName:!0,name:e.risk_step_nm}})],1),a("th",[t._v(t._s(e.risk_num+e.risk_unit))])])})),0)])])])],1),a("div",{staticClass:"page-box"},[a("PanelTitle",{attrs:{title:"위험도 예측"}}),a("PredictionFiltering",{on:{filtering:t.onFiltering}}),a("PanelSubTitle",{attrs:{title:"통합 위험도 예측"}}),a("ChartBox",{attrs:{"raw-data":t.predictEquipmentHour24.list,"chart-type":"PREDICTION24HOUR"}}),a("table",{staticClass:"default-table double-row-header"},[a("thead",[a("tr",[a("th",{attrs:{rowspan:"2"}},[t._v("날짜")]),t._l(t.ymdList,(function(e){return a("th",{key:e.ymd,attrs:{colspan:e.count}},[t._v(" "+t._s(t.formatter.date(e.ymd,"MM/dd"))+" ")])}))],2),a("tr",t._l(t.predictEquipmentHour24.list,(function(e,i){return a("th",{key:i},[t._v(" "+t._s(e.qtime)+"시 ")])})),0)]),t.predictEquipmentHour24.list.length?a("tbody",[a("tr",[a("th",[t._v("위험단계")]),t._l(t.predictEquipmentHour24.list,(function(t){return a("td",{key:t.qtime},[a("RiskLabel",{attrs:{"text-data":t.risk_rate,showRiskLabel:!1}})],1)}))],2)]):t._e()])],1)],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("순위")]),a("th",[t._v("설비")]),a("th",[t._v("위험단계")]),a("th",[t._v("발생확률")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("순위")]),a("th",[t._v("설비")]),a("th",[t._v("위험단계")]),a("th",[t._v("발생확률")])])])}],s=(a("4160"),a("159b"),a("5530")),n=a("2f62"),c=a("c6f9"),o=a("3b51"),u=a("6e4b"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filter-container"},[a("h4",{staticClass:"title"},[t._v("설비")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectProcs,expression:"selectProcs"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectProcs=e.target.multiple?a:a[0]},t.onProcessChange]}},[a("option",{attrs:{value:"all"}},[t._v("전체 시설")]),t._l(t.process,(function(e){return a("option",{key:e.procs_id,domProps:{value:e.procs_id}},[t._v(" "+t._s(e.procs_nm)+" ")])}))],2),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectEqmt,expression:"selectEqmt"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectEqmt=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"all"}},[t._v("전체 설비")]),t._l(t.equipment,(function(e){return a("option",{key:e.eqmt_id,domProps:{value:e.eqmt_id}},[t._v(" "+t._s(e.eqmt_nm)+" ")])}))],2),a("button",{on:{click:t.onClick}},[t._v("검색")])])},h=[],d={name:"PredictionFiltering",computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(n["c"])("common/process",["process"])),Object(n["c"])("common/equipment",["equipment"])),{},{activeEquipmentId:function(){return this.activeEquipId}}),data:function(){return{selectProcs:"all",selectEqmt:"all"}},created:function(){this.$store.dispatch("common/process/query",{queryString:""})},methods:{onClick:function(){this.$emit("filtering",{process:this.selectProcs,equipment:this.selectEqmt})},onProcessChange:function(){this.selectEqmt="all","all"===this.selectProcs?this.$store.dispatch("common/equipment/clear",{stateName:"equipment"}):this.$store.dispatch("common/equipment/query",{queryString:"?procs_id="+this.selectProcs})}}},f=d,p=(a("ab95"),a("2877")),m=Object(p["a"])(f,l,h,!1,null,"7111d3ac",null),v=m.exports,b=a("a321"),_=a("4ba1"),g=a("7ec5"),k=a("25b9"),E={name:"RiskPrediction",components:{PageTitle:k["a"],RiskLabel:g["a"],ChartBox:b["a"],PredictionFiltering:v,RiskStepLabel:u["a"],PanelSubTitle:o["a"],PanelTitle:c["a"]},computed:Object(s["a"])(Object(s["a"])({},Object(n["c"])(["predictEquipmentRiskTop10","predictEquipmentHour24"])),{},{ymdList:function(){var t=[];return this.predictEquipmentHour24.list.forEach((function(e){var a=t[t.length-1];a&&a.ymd===e.ymd?a.count++:t.push({ymd:e.ymd,count:1})})),t}}),created:function(){this.$store.dispatch("predictEquipmentRiskTop10")},data:function(){return{formatter:_["a"]}},methods:{onFiltering:function(t){console.log(t),this.$store.dispatch("predictEquipmentHour24",t)}}},C=E,y=(a("5b5c"),Object(p["a"])(C,i,r,!1,null,"5e63571e",null));e["default"]=y.exports},f217:function(t,e,a){}}]);
//# sourceMappingURL=chunk-01933508.js.map