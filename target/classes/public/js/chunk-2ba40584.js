(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ba40584"],{"25d9":function(t,e,a){},"33d8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PageTitle",{attrs:{title:t.processTitle,"has-date-range-picker":""},on:{changedDate:t.onChangedDate}}),a("div",{staticClass:"page-box"},[a("PanelTitle",{attrs:{title:"통합위험도",desc:t.processTitle}}),a("ChartBox",{attrs:{"raw-data":t.riskProcessHistoryMap,"chart-type":"PROCESS"}}),a("table",{staticClass:"default-table"},[a("thead",[a("tr",t._l(t.riskProcessHistoryMap.cols,(function(e,s){return a("th",{key:s},[t._v(" "+t._s(t.getTableHeader(e))+" ")])})),0)]),a("tbody",t._l(t.riskProcessHistoryMap.data,(function(e,s){return a("tr",{key:s},t._l(t.sortRow(e),(function(e,s){return a("td",{key:s},[0===s?a("span",[t._v(" "+t._s(t.formatter.date(e,"MM/dd"))+" ")]):a("RiskLabel",{attrs:{"text-data":e,"is-double-row":""}})],1)})),0)})),0)])],1),a("div",{staticClass:"page-box"},[a("PanelTitle",{attrs:{title:"시설물 별 위험도",desc:t.processTitle}}),a("PanelTab",{attrs:{items:t.equipmentByProcsId.list,"display-prop-name":"eqmt_nm","emit-prop-list":["eqmt_id","eqmt_nm"]},on:{change:t.equipmentTabChanged}}),a("PanelSubTitle",{attrs:{title:t.equipmentTitle},scopedSlots:t._u([{key:"button",fn:function(){return[a("router-link",{staticClass:"btn-light",attrs:{to:{path:"/analysis/equipment/"+t.selectedEquipmentId,query:{procs_nm:t.processTitle,eqmt_nm:t.equipmentTitle}}}},[t._v(" 자세히 ")])]},proxy:!0}])}),a("ChartBox",{attrs:{"raw-data":t.riskEquipmentHistoryMap,"chart-type":"EQUIPMENT"}}),a("table",{staticClass:"default-table"},[a("thead",[a("tr",t._l(t.riskEquipmentHistoryMap.cols,(function(e,s){return a("th",{key:s},[t._v(" "+t._s(t.getTableHeader(e))+" ")])})),0)]),a("tbody",t._l(t.riskEquipmentHistoryMap.data,(function(e,s){return a("tr",{key:s},t._l(t.sortRow(e),(function(e,s){return a("td",{key:s},[0===s?a("span",[t._v(" "+t._s(t.formatter.date(e,"MM/dd"))+" ")]):e?a("RiskLabel",{attrs:{"text-data":e,"is-double-row":""}}):a("span",[t._v("-")])],1)})),0)})),0)])],1)],1)},i=[],r=(a("c975"),a("5530")),n=a("c6f9"),o=a("2f62"),c=a("25b9"),u=a("a321"),l=a("7ec5"),d=a("4ba1"),h=a("7789"),f=a("3b51"),p=a("5a0c"),m=a.n(p),b={name:"RiskPredictionProcessDetail",components:{PanelSubTitle:f["a"],PanelTab:h["a"],RiskLabel:l["a"],ChartBox:u["a"],PageTitle:c["a"],PanelTitle:n["a"]},props:{procs_id:String,procs_nm:String},computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["riskProcessHistoryMap","equipmentByProcsId","riskEquipmentHistoryMap"])),{},{processTitle:function(){return this.$route.query.procs_nm?this.$route.query.procs_nm:"공정 상세 정보"},equipmentTitle:function(){return this.selectedEquipmentName?this.selectedEquipmentName+" 위험도":"-"}}),created:function(){this.queryRiskProcessHistoryMap()},data:function(){return{formatter:d["a"],selectedEquipmentId:"",selectedEquipmentName:"",selectedDate:{startDate:m()().format("YYYYMMDD"),endDate:m()().format("YYYYMMDD")}}},methods:{queryRiskProcessHistoryMap:function(){var t=this;this.$store.dispatch("riskProcessHistoryMap",{queryString:"?strt_anys_ymd="+this.selectedDate.startDate+"&end_anys_ymd="+this.selectedDate.endDate+"&procs_id="+this.procs_id}),this.$store.dispatch("equipmentByProcsId",{queryString:"?procs_id="+this.procs_id}).then((function(){var e={eqmt_id:t.equipmentByProcsId.list[0].eqmt_id,eqmt_nm:t.equipmentByProcsId.list[0].eqmt_nm};t.equipmentTabChanged(e)}))},getTableHeader:function(t){return"date"===t?"날짜":t+"시"},sortRow:function(t){var e=[],a=this.riskProcessHistoryMap.cols;for(var s in t){var i=a.indexOf(s);e[i]=t[s]}return e},equipmentTabChanged:function(t){console.log(t.eqmt_nm),this.selectedEquipmentId=t.eqmt_id,this.selectedEquipmentName=t.eqmt_nm,this.$store.dispatch("riskEquipmentHistoryMap",{queryString:"?strt_anys_ymd="+this.selectedDate.startDate+"&end_anys_ymd="+this.selectedDate.endDate+"&eqmt_id="+t.eqmt_id})},onChangedDate:function(t){console.log(t,"onChangedDate<<<<"),this.selectedDate.startDate=m()(t.startDate).format("YYYYMMDD"),this.selectedDate.endDate=m()(t.endDate).format("YYYYMMDD"),this.queryRiskProcessHistoryMap()}}},g=b,k=(a("8fbe"),a("2877")),y=Object(k["a"])(g,s,i,!1,null,"25cd432e",null);e["default"]=y.exports},"3b51":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel-title"},[a("h5",[t._v(t._s(t.title))]),t.desc?a("div",{staticClass:"title-desc"},[t._v(t._s(t.desc))]):t._e(),t._t("button")],2)},i=[],r={name:"PanelSubTitle",props:{title:String,desc:String}},n=r,o=(a("5dee"),a("2877")),c=Object(o["a"])(n,s,i,!1,null,"ec9ecad0",null);e["a"]=c.exports},"4ba1":function(t,e,a){"use strict";a("ac1f"),a("1276");var s={date:function(t,e){if(!t)return"";var a=t.substr(0,4),i=t.substr(4,2),r=t.substr(6,2),n=t.substr(8,2),o=t.substr(10,2),c=t.substr(12,2),u=""===n||""===o?"":" "+n+":"+o;if(u=""===c?u:" "+u+":"+c,"MM/dd~MM/dd"===e){var l=t.split("~");return s.date(l[0],"MM/dd")+"~"+s.date(l[1],"MM/dd")}return"MM/dd"===e?i+"/"+r:a+"-"+i+"-"+r+u}};e["a"]=s},"5dee":function(t,e,a){"use strict";var s=a("9a65"),i=a.n(s);i.a},6940:function(t,e,a){},"6e03":function(t,e,a){"use strict";var s=a("6940"),i=a.n(s);i.a},7789:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"tab"},[t._l(t.items,(function(e,s){return a("li",{key:s,class:{active:t.index===s},on:{click:function(a){return t.onClick(s,e)}}},[t._v(" "+t._s(e[t.displayPropName])+" ")])})),t._l(t.getBlankNum(t.items),(function(t,e){return a("li",{key:e,staticClass:"blank-item"})}))],2)},i=[],r=(a("4160"),a("a9e3"),a("159b"),{name:"PanelTab",props:{items:Array,displayPropName:String,numsInRow:{type:Number,default:5},emitPropList:{type:Array,required:!0}},computed:{cssVars:function(){return{"--numsInRow":this.numsInRow}}},data:function(){return{index:0}},methods:{onClick:function(t,e){this.index=t;var a={};this.emitPropList&&this.emitPropList.length?this.emitPropList.forEach((function(t){a[t]=e[t]})):a[this.displayPropName]=e[this.displayPropName],this.$emit("change",a)},getBlankNum:function(t){var e=0;return t&&t.length&&(e=(this.numsInRow-t.length%this.numsInRow)%this.numsInRow),e}}}),n=r,o=(a("a4e3"),a("2877")),c=Object(o["a"])(n,s,i,!1,null,"1836dfbf",null);e["a"]=c.exports},"7ec5":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.validated?a("div",{class:{"double-row":!t.isDoubleRow}},[a("RiskStepLabel",{class:{"full-size":t.isDoubleRow},attrs:{"delete-step-suffix":t.isDeleteStepSuffix,name:t.riskName,code:t.riskCode}}),t.showRiskLabel?a("div",{staticClass:"risk-label"},[t._v(t._s(t.riskNum+t.riskUnit))]):t._e()],1):a("div",[t._v("-")])},i=[],r=(a("c975"),a("b0c0"),a("a9e3"),a("ac1f"),a("1276"),a("6e4b")),n={name:"RiskLabel",components:{RiskStepLabel:r["a"]},props:{isDoubleRow:Boolean,isDeleteStepSuffix:Boolean,showRiskLabel:{type:Boolean,default:!0},name:String,code:String,num:Number,unit:String,textData:String},computed:{validated:function(){return this.textData||this.code},isTextData:function(){return this.textData&&this.textData.indexOf(":")>-1},riskName:function(){var t="";if(this.isTextData)t=this.textData.indexOf(":")>-1?this.textData.split(":")[1]:this.textData;else if(this.name)t=this.name;else if(this.code){var e=this.code.substr(0,2),a=this.code.substr(-1,1);switch(e){case"NR":t="정상";break;case"CR":t="주의";break;case"WR":t="경고";break;case"DG":t="위험";break;default:t="-"}t=t+" "+a+" 단계"}return this.isDeleteStepSuffix&&(t=t.substr(0,2)),t},riskCode:function(){var t;if(this.isTextData){var e=this.textData.split(":")[1].substr(0,2);switch(e){case"정상":t="NR";break;case"주의":t="CR";break;case"경고":t="WR";break;case"위험":t="DG";break;default:t=""}}else t=this.code;return t},riskNum:function(){var t=0;if(this.isTextData){var e=this.textData.split(":");t=Number(e[0])}else t=this.num;return t},riskUnit:function(){return this.unit?this.unit:"%"}},methods:{}},o=n,c=(a("dc5e"),a("2877")),u=Object(c["a"])(o,s,i,!1,null,"5401d788",null);e["a"]=u.exports},"8fbe":function(t,e,a){"use strict";var s=a("adee"),i=a.n(s);i.a},"99af":function(t,e,a){"use strict";var s=a("23e7"),i=a("d039"),r=a("e8b5"),n=a("861d"),o=a("7b0b"),c=a("50c4"),u=a("8418"),l=a("65f0"),d=a("1dde"),h=a("b622"),f=a("2d00"),p=h("isConcatSpreadable"),m=9007199254740991,b="Maximum allowed index exceeded",g=f>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),k=d("concat"),y=function(t){if(!n(t))return!1;var e=t[p];return void 0!==e?!!e:r(t)},D=!g||!k;s({target:"Array",proto:!0,forced:D},{concat:function(t){var e,a,s,i,r,n=o(this),d=l(n,0),h=0;for(e=-1,s=arguments.length;e<s;e++)if(r=-1===e?n:arguments[e],y(r)){if(i=c(r.length),h+i>m)throw TypeError(b);for(a=0;a<i;a++,h++)a in r&&u(d,h,r[a])}else{if(h>=m)throw TypeError(b);u(d,h++,r)}return d.length=h,d}})},"9a65":function(t,e,a){},a321:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chart-container",class:{"main-type":"MAIN"===t.chartType}},[a("highcharts",{ref:"highcharts",attrs:{options:t.chartOptions}})],1)},i=[],r=(a("99af"),a("4160"),a("a9e3"),a("ac1f"),a("1276"),a("159b"),a("4452")),n=a("4ba1"),o={name:"ChartBox",components:{highcharts:r["Chart"]},props:{chartType:String,rawData:null},watch:{seriesData:{handler:function(){var t=this;while(this.chart.series.length>0)this.chart.series[0].remove(!0);this.seriesData.forEach((function(e){t.chart.addSeries(e)})),this.chart.xAxis[0].setCategories(this.categoryData)},deep:!0}},computed:{seriesData:function(){var t=null;switch(this.chartType){case"MAIN":t=this.getMainList();break;case"PREDICTION24HOUR":t=this.getPrediction24HourList();break;case"PREDICTION7DAY":t=this.getPrediction7DayList();break;case"PREDICTION4WEEK":t=this.getPrediction4WeekList();break;case"PROCESS":t=this.getProcessList("생산공정 상세");break;case"EQUIPMENT":t=this.getProcessList("설비 상세");break;default:return[]}return t},categoryData:function(){var t=null;switch(this.chartType){case"MAIN":t=this.getHourCategories();break;case"PREDICTION24HOUR":t=this.getHourCategories();break;case"PREDICTION7DAY":t=this.getDayCategories();break;case"PREDICTION4WEEK":t=this.getWeekCategories();break;case"PROCESS":t=this.getProcessCategories();break;case"EQUIPMENT":t=this.getProcessCategories();break;default:return[]}return t}},mounted:function(){this.chart=this.$refs.highcharts.chart},data:function(){return{chart:null,chartOptions:{chart:{type:"area",height:this.getChartHeight(),animation:{duration:1e3}},title:!1,legend:this.getLegendConfig(),xAxis:{categories:[]},yAxis:{title:!1,labels:{formatter:function(){var t={0:"",25:"정상",50:"주의",75:"경고",100:"위험"},e={0:"transparent",25:"#2d969b",50:"#f06c00",75:"#ff0000",100:"#a40000"};return'<span style="color: '.concat(e[this.value],'">').concat(t[this.value],"</span>")},y:28,x:-40,style:{color:"#666666",fontSize:15,fontWeight:"bold"}},max:100,tickAmount:5,tickWidth:1,tickLength:100},plotOptions:{series:{marker:{fillColor:"#FFFFFF",lineWidth:2,lineColor:null}},area:{pointPlacement:"on"}},credits:{enabled:!1}}}},methods:{getProcessCategories:function(){var t=this,e=[];return this.rawData.data.forEach((function(a){t.rawData.cols.forEach((function(t){if("date"!==t){var s=a[t];s&&e.push(t+"시")}}))})),e},getWeekCategories:function(){var t=[];return this.rawData.forEach((function(e){t.push(n["a"].date(e.risk_dt,"MM/dd~MM/dd"))})),t},getDayCategories:function(){var t=[];return this.rawData.forEach((function(e){t.push(n["a"].date(e.ymd,"MM/dd"))})),t},getHourCategories:function(){var t=[];return this.rawData.forEach((function(e){t.push(e.qtime+"시")})),t},getChartHeight:function(){return"MAIN"===this.chartType?250:230},getLegendConfig:function(){return"MAIN"===this.chartType&&{layout:"horizontal",align:"left",verticalAlign:"top",x:50}},getProcessList:function(t){var e=[{name:t,data:[],color:"#f58fae"}],a=this.rawData.cols;return this.rawData.data.forEach((function(t){a.forEach((function(a){if("date"!==a){var s=t[a];s=s?Number(s.split(":")[0]):null,e[0].data.push(s)}}))})),e},getPrediction4WeekList:function(){var t=[{name:"4주 예측",data:[],color:"#f58fae"}];return this.rawData.forEach((function(e){t[0].data.push(Number(e.risk_rate.split(":")[0]))})),t},getPrediction7DayList:function(){var t=[{name:"7일 예측",data:[],color:"#f58fae"}];return this.rawData.forEach((function(e){t[0].data.push(Number(e.risk_rate.split(":")[0]))})),t},getPrediction24HourList:function(){var t=[{name:"24시간 예측",data:[],color:"#f58fae"}];return this.rawData.forEach((function(e){t[0].data.push(Number(e.risk_rate.split(":")[0]))})),t},getMainList:function(){var t=[{name:"화재폭발 위험도",data:[],color:"#f58fae"},{name:"질식/중독 위험도",data:[],color:"#63e3ef"}];return this.rawData.forEach((function(e){t[0].data.push(Number(e.CRIG101.split(":")[0])),t[1].data.push(Number(e.CRIG102.split(":")[0]))})),t}}},c=o,u=(a("6e03"),a("2877")),l=Object(u["a"])(c,s,i,!1,null,"bc47774c",null);e["a"]=l.exports},a4e3:function(t,e,a){"use strict";var s=a("ec35"),i=a.n(s);i.a},adee:function(t,e,a){},dc5e:function(t,e,a){"use strict";var s=a("25d9"),i=a.n(s);i.a},ec35:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2ba40584.js.map