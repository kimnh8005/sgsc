(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0276d042"],{"0ebd":function(t,e,a){},1281:function(t,e,a){"use strict";var s=a("7564"),i=a.n(s);i.a},"2b90":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"pagination"},[a("li",{class:{disabled:1===t.pageIndex||0===t.totalPages},on:{click:t.prev}},[t._v(" < 이전 ")]),t._l(t.pageList,(function(e,s){return a("li",{key:s,class:{active:t.pageIndex===e},on:{click:function(a){return t.onChange(e)}}},[t._v(" "+t._s(e)+" ")])})),a("li",{class:{disabled:t.pageIndex===t.totalPages||0===t.totalPages},on:{click:t.next}},[t._v("다음 >")])],2)},i=[],n=(a("a9e3"),{name:"Pagination",props:{totalCount:{type:Number,default:0},maxDisplayPageCount:{type:Number,default:5},pageIndex:{type:Number,default:1},pageSize:{type:Number,default:100}},computed:{totalPages:function(){return Math.ceil(this.totalCount/this.pageSize)},pageCount:function(){return this.totalPages>this.maxDisplayPageCount?this.maxDisplayPageCount:this.totalPages},pageList:function(){var t=this.pageIndex>3?this.pageIndex-2:1,e=this.totalPages-this.pageIndex;t=this.totalPages>this.maxDisplayPageCount&&e<3?t-(this.maxDisplayPageCount-e-3):t;for(var a=[],s=0;s<this.pageCount;++s)a.push(t+s);return a}},methods:{onChange:function(t){this.pageIndex!==t&&this.$emit("change",t)},prev:function(){1!==this.pageIndex&&this.onChange(this.pageIndex-1)},next:function(){this.pageIndex!==this.totalPages&&this.onChange(this.pageIndex+1)}}}),o=n,r=(a("9750"),a("2877")),l=Object(r["a"])(o,s,i,!1,null,"119af7fa",null);e["a"]=l.exports},"324a":function(t,e,a){"use strict";var s=a("80da"),i=a.n(s);i.a},"60f4":function(t,e,a){"use strict";var s=a("a4e4"),i=a.n(s);i.a},"66d3":function(t,e,a){"use strict";var s=a("0ebd"),i=a.n(s);i.a},7564:function(t,e,a){},"7e3e":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PageTitle"),a("div",{staticClass:"page-box"},[a("Tab",{attrs:{items:t.tabItems,"display-prop-name":"tab_nm","emit-prop-list":["tab_id","tab_nm"]},on:{change:t.recordTabChanged}}),"notification_record"===t.selectedTab.tab_id?a("div",[a("PanelProcessEquipmentFiltering",{attrs:{"has-date-range-picker":"","process-title":"설 비","equipment-title":null,"start-date":t.filtering.startDate,"end-date":t.filtering.endDate},on:{filtering:t.onFiltering}}),a("PanelTitle",{attrs:{title:"알림 이력",desc:t.total}}),a("table",{staticClass:"default-table double-row-header"},[t._m(0),a("tbody",t._l(t.gasRiskProposalList.list,(function(t,e){return a("tr",{key:e},[a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskLabel:!1}})],1),a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskStep:!1}})],1),a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskLabel:!1}})],1),a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskStep:!1}})],1),a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskLabel:!1}})],1),a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskStep:!1}})],1),a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskLabel:!1}})],1),a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskStep:!1}})],1)])})),0)]),a("Pagination",{attrs:{"page-index":this.page.index,"total-count":t.gasRiskProposalList.totalcount,"page-size":this.page.size},on:{change:t.onChangePage}})],1):"control_record"===t.selectedTab.tab_id?a("div",[a("PanelProcessEquipmentFiltering",{attrs:{"has-date-range-picker":"","process-title":"설 비","equipment-title":null,"start-date":t.filtering.startDate,"end-date":t.filtering.endDate},on:{filtering:t.onFiltering}}),a("PanelTitle",{attrs:{title:"제어 이력",desc:t.total}}),a("table",{staticClass:"default-table double-row-header"},[t._m(1),a("tbody",t._l(t.gasRiskProposalList.list,(function(t,e){return a("tr",{key:e},[a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskLabel:!1}})],1),a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskStep:!1}})],1),a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskLabel:!1}})],1),a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskStep:!1}})],1),a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskLabel:!1}})],1),a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskStep:!1}})],1),a("th",[a("RiskLabel",{attrs:{"text-data":t.RISK_RATE,showRiskStep:!1}})],1)])})),0)]),a("Pagination",{attrs:{"page-index":this.page.index,"total-count":t.gasRiskProposalList.totalcount,"page-size":this.page.size},on:{change:t.onChangePage}})],1):t._e()],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{rowspan:"2"}},[t._v("No")]),a("th",{attrs:{colspan:"3"}},[t._v("위험 시설")]),a("th",{attrs:{rowspan:"2"}},[t._v("제어 대상 밸브")]),a("th",{attrs:{rowspan:"2"}},[t._v("밸브 제어 요청")]),a("th",{attrs:{rowspan:"2"}},[t._v("이상원인")]),a("th",{attrs:{rowspan:"2"}},[t._v("발생 일시")])]),a("tr",[a("th",[t._v("시설")]),a("th",[t._v("통합 위험단계")]),a("th",{staticClass:"no-radius border-right"},[t._v("통합 위험률")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{rowspan:"2"}},[t._v("No")]),a("th",{attrs:{colspan:"3"}},[t._v("위험 시설")]),a("th",{attrs:{rowspan:"2"}},[t._v("제어 대상 밸브")]),a("th",{attrs:{rowspan:"2"}},[t._v("밸브 제어 요청자")]),a("th",{attrs:{rowspan:"2"}},[t._v("발생 일시")])]),a("tr",[a("th",[t._v("시설")]),a("th",[t._v("통합 위험단계")]),a("th",{staticClass:"no-radius border-right"},[t._v("통합 위험률")])])])}],n=a("5530"),o=a("2f62"),r=a("c6f9"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"tab"},[t._l(t.items,(function(e,s){return a("li",{key:"filled_"+s,class:{active:t.index===s},on:{click:function(a){return t.onClick(s,e)}}},[t._v(" "+t._s(e[t.displayPropName])+" ")])})),t._l(t.getBlankNum(t.items),(function(t,e){return a("li",{key:"empty_"+e,staticClass:"blank-item"})}))],2)},c=[],u=(a("4160"),a("a9e3"),a("159b"),{name:"Tab",props:{items:Array,displayPropName:String,numsInRow:{type:Number,default:5},emitPropList:{type:Array,required:!0}},computed:{cssVars:function(){return{"--numsInRow":this.numsInRow}}},created:function(){this.onClick(0,this.items[0])},data:function(){return{index:0}},methods:{onClick:function(t,e){this.index=t;var a={};this.emitPropList&&this.emitPropList.length?this.emitPropList.forEach((function(t){a[t]=e[t]})):a[this.displayPropName]=e[this.displayPropName],this.$emit("change",a)},getBlankNum:function(t){var e=0;return t&&t.length&&(e=(this.numsInRow-t.length%this.numsInRow)%this.numsInRow),e}}}),d=u,h=(a("60f4"),a("2877")),p=Object(h["a"])(d,l,c,!1,null,"3633bb0a",null),m=p.exports,f=a("25b9"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filter-container"},[a("h4",{staticClass:"title"},[t._v(t._s(t.processTitle))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectProcs,expression:"selectProcs"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectProcs=e.target.multiple?a:a[0]},t.onProcessChange]}},[a("option",{attrs:{value:""}},[t._v("전체 시설")]),t._l(t.process,(function(e){return a("option",{key:e.procs_id,domProps:{value:e.procs_id}},[t._v(" "+t._s(e.procs_nm)+" ")])}))],2),a("h4",{staticClass:"title",class:{"blank-title":null===t.equipmentTitle}},[t._v(t._s(t.equipmentTitle))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectEqmt,expression:"selectEqmt"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectEqmt=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("전체 설비")]),t._l(t.equipment,(function(e){return a("option",{key:e.eqmt_id,domProps:{value:e.eqmt_id}},[t._v(" "+t._s(e.eqmt_nm)+" ")])}))],2),a("div",{staticClass:"vertical-line"}),t.hasDateRangePicker?[a("h4",{staticClass:"title"},[t._v(t._s(t.datepickerTitle))]),a("div",{staticClass:"datepicker-container"},[t._m(0),a("DateRangePicker",{ref:"picker",attrs:{opens:t.dateRange.opens,"locale-data":t.dateRange.localeData,showDropdowns:t.dateRange.showDropdowns,autoApply:t.dateRange.autoApply,ranges:t.dateRange.showRange},on:{update:t.onUpdateDateRange},scopedSlots:t._u([{key:"input",fn:function(e){return[t._v(" "+t._s(t._f("date")(e.startDate))+" ~ "+t._s(t._f("date")(e.endDate))+" ")]}}],null,!1,985506992),model:{value:t.selectedDateRange,callback:function(e){t.selectedDateRange=e},expression:"selectedDateRange"}})],1)]:t._e(),t.hasLeakageCheck?[a("h4",{staticClass:"title"},[t._v("누출위험")]),t._l(t.checkboxList,(function(e){return a("label",{key:e.value},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.bool,expression:"item.bool"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.bool)?t._i(e.bool,null)>-1:e.bool},on:{change:[function(a){var s=e.bool,i=a.target,n=!!i.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);i.checked?r<0&&t.$set(e,"bool",s.concat([o])):r>-1&&t.$set(e,"bool",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(e,"bool",n)},t.onCheckboxChange]}}),t._v(" "+t._s(e.name)+" ")])}))]:t._e(),t.hasWorkStatSelector?[a("h4",{staticClass:"title"},[t._v("상태")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedWorkStatCode,expression:"selectedWorkStatCode"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedWorkStatCode=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("전체")]),t._l(t.WORK_STAT_CD,(function(t){return a("option",{key:t.cd_id,attrs:{label:t.cd_nm},domProps:{value:t.cd_id}})}))],2)]:t._e(),a("button",{attrs:{disabled:t.requireSelectEquipment&&""===t.selectEqmt},on:{click:t.onClick}},[t._v("검 색")])],2)},b=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"icon"},[s("img",{attrs:{src:a("7cb0"),alt:"calender icon"}})])}],_=a("bbf5"),k=a.n(_),v=(a("4b7f"),a("5a0c")),R=a.n(v),D={name:"PanelProcessEquipmentFiltering",components:{DateRangePicker:k.a},props:{requireSelectEquipment:Boolean,hasDateRangePicker:Boolean,hasLeakageCheck:Boolean,hasWorkStatSelector:Boolean,startDate:{type:String},endDate:{type:String},processTitle:{type:String,default:"생산공정"},equipmentTitle:{type:String,default:"설 비"},datepickerTitle:{type:String,default:"발생일시"}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["c"])("common/process",["process"])),Object(o["c"])("common/equipment",["equipment"])),Object(o["c"])("common/code",["WORK_STAT_CD"])),{},{activeEquipmentId:function(){return this.activeEquipId}}),data:function(){var t=this.startDate?R()(this.startDate).format("YYYY-MM-DD"):R()().format("YYYY-MM-DD"),e=this.endDate?R()(this.endDate).format("YYYY-MM-DD"):R()().format("YYYY-MM-DD");return{selectProcs:"",selectEqmt:"",dayjs:R.a,selectedDateRange:{startDate:t,endDate:e},dateRange:{today:new Date,opens:"left",showDropdowns:!1,showRange:!1,localeData:{direction:"ltr",format:"yyyy-mm-dd",separator:" ~ ",applyLabel:"적용",cancelLabel:"취소",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:["일","월","화","수","목","금","토"],monthNames:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],firstDay:0}},checkboxList:[{name:"ON",value:"on",bool:!0},{name:"OFF",value:"off",bool:!0}],selectedWorkStatCode:""}},created:function(){this.$store.dispatch("common/process/query",{queryString:""}),this.hasWorkStatSelector&&this.$store.dispatch("common/code/query",{code:"WORK_STAT_CD"})},filters:{date:function(t){return t?R()(t).format("YYYY-MM-DD"):""}},methods:{onClick:function(){var t={processId:this.selectProcs,equipmentId:this.selectEqmt};this.hasDateRangePicker&&(t["startDate"]=R()(this.selectedDateRange.startDate).format("YYYYMMDD"),t["endDate"]=R()(this.selectedDateRange.endDate).format("YYYYMMDD")),this.hasWorkStatSelector&&(t["workStat"]=this.selectedWorkStatCode),this.$emit("filtering",t)},onProcessChange:function(){this.selectEqmt="",""===this.selectProcs?this.$store.dispatch("common/equipment/clear",{stateName:"equipment"}):this.$store.dispatch("common/equipment/query",{queryString:"?procs_id="+this.selectProcs})},onUpdateDateRange:function(t){console.log("this.onUpdateDateRange",t),this.$emit("changedDate",t)},onCheckboxChange:function(){var t="";this.list.forEach((function(e){e.bool&&(t.length>0&&(t+=","),t+=e.value)}))}}},x=D,y=(a("1281"),Object(h["a"])(x,g,b,!1,null,"2f8dabed",null)),P=y.exports,S=a("7ec5"),w=a("2b90"),C={name:"GasRiskProposition",components:{Pagination:w["a"],RiskLabel:S["a"],PanelProcessEquipmentFiltering:P,Tab:m,PageTitle:f["a"],PanelTitle:r["a"]},computed:Object(n["a"])(Object(n["a"])({},Object(o["c"])(["gasRiskProposalList"])),{},{total:function(){return this.gasRiskProposalList.totalcount?"총 "+this.gasRiskProposalList.totalcount+" 건":""}}),created:function(){"notification_record"===this.selectedTab.tab_id||this.selectedTab.tab_id},data:function(){return{dayjs:R.a,page:{index:1,size:20},filtering:{startDate:R()().startOf("month").format("YYYYMMDD"),endDate:R()().endOf("month").format("YYYYMMDD"),processId:"",equipmentId:""},tabItems:[{tab_id:"notification_record",tab_nm:"알림 이력"},{tab_id:"control_record",tab_nm:"제어 이력"}],selectedTab:{tab_id:"notification_record",tab_nm:"알림 이력"}}},methods:{queryList:function(){var t="?pagesize="+this.page.size+"&pageindex="+this.page.index;t+="&strt_props_ymd="+this.filtering.startDate+"&end_props_ymd="+this.filtering.endDate,t+="&procs_id="+this.filtering.processId+"&eqmt_id="+this.filtering.equipmentId,this.$store.dispatch("gasRiskProposalList",{queryString:t})},getNumberByRowOrder:function(t){return this.gasRiskProposalList.totalcount-t+1},onFiltering:function(t){console.log(t),this.filtering=t,this.page.index=1,this.queryList()},onChangePage:function(t){this.page.index=t,this.queryList()},recordTabChanged:function(t){this.selectedTab=t,"notification_record"===this.selectedTab.tab_id||this.selectedTab.tab_id}}},L=C,T=(a("66d3"),Object(h["a"])(L,s,i,!1,null,"7d3b8d5e",null));e["default"]=T.exports},"7ec5":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.validated?a("div",{class:{"double-row":!t.isDoubleRow}},[t.showRiskStep?a("RiskStepLabel",{class:{"full-size":t.isDoubleRow},attrs:{"delete-step-suffix":t.isDeleteStepSuffix,name:t.riskName,code:t.riskCode}}):t._e(),t.showRiskLabel?a("div",{staticClass:"risk-label"},[t._v(t._s(t.riskNum+t.riskUnit))]):t._e()],1):a("div",[t._v("-")])},i=[],n=(a("c975"),a("b0c0"),a("a9e3"),a("ac1f"),a("1276"),a("6e4b")),o={name:"RiskLabel",components:{RiskStepLabel:n["a"]},props:{isDoubleRow:Boolean,isDeleteStepSuffix:Boolean,showRiskStep:{type:Boolean,default:!0},showRiskLabel:{type:Boolean,default:!0},name:String,code:String,num:Number,unit:String,textData:String},computed:{validated:function(){return this.textData||this.code},isTextData:function(){return this.textData&&this.textData.indexOf(":")>-1},riskName:function(){var t="";if(this.isTextData)t=this.textData.indexOf(":")>-1?this.textData.split(":")[1]:this.textData;else if(this.name)t=this.name;else if(this.code){var e=this.code.substr(0,2),a=this.code.substr(-1,1);switch(e){case"NR":t="정상";break;case"CR":t="주의";break;case"WR":t="경고";break;case"DG":t="위험";break;default:t="-"}t=t+" "+a+" 단계"}return this.isDeleteStepSuffix&&(t=t.substr(0,2)),t},riskCode:function(){var t;if(this.isTextData){var e=this.textData.split(":")[1].substr(0,2);switch(e){case"정상":t="NR";break;case"주의":t="CR";break;case"경고":t="WR";break;case"위험":t="DG";break;default:t=""}}else t=this.code;return t},riskNum:function(){var t=0;if(this.isTextData){var e=this.textData.split(":");t=Number(e[0])}else t=this.num;return t},riskUnit:function(){return this.unit?this.unit:"%"}},methods:{}},r=o,l=(a("324a"),a("2877")),c=Object(l["a"])(r,s,i,!1,null,"6212cb5a",null);e["a"]=c.exports},"80da":function(t,e,a){},9750:function(t,e,a){"use strict";var s=a("d72f"),i=a.n(s);i.a},a4e4:function(t,e,a){},d72f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-0276d042.js.map